# Архитектура проекта

## Обзор

Проект представляет собой статический сайт портфолио, построенный на Next.js 16 с использованием App Router. Сайт генерируется полностью статически (SSG) и поддерживает международную локализацию, темы оформления и контент на основе MDX.

## Технологический стек

### Основные технологии

- **Next.js 16** - React-фреймворк с App Router
- **TypeScript** - типизация кода
- **Tailwind CSS** - стилизация
- **shadcn/ui** - библиотека UI-компонентов
- **MDX** - формат для написания контента с поддержкой React-компонентов
- **next-themes** - управление темами (светлая/темная)

### Инструменты разработки

- ESLint - линтер кода
- Prettier - форматирование кода (опционально)

## Структура проекта

```
/
├── app/                      # App Router Next.js
│   ├── [locale]/            # Динамический сегмент для локализации
│   │   ├── projects/        # Страницы проектов
│   │   │   └── [slug]/      # Динамические страницы проектов
│   │   └── layout.tsx       # Layout с провайдерами тем и i18n
│   ├── globals.css          # Глобальные стили
│   └── layout.tsx           # Корневой layout
├── components/              # React-компоненты
│   ├── ui/                  # shadcn/ui компоненты
│   └── ...                  # Другие компоненты
├── content/                 # MDX контент
│   └── projects/
│       ├── en/              # Проекты на английском
│       └── ru/              # Проекты на русском
├── lib/                     # Утилиты и хелперы
│   ├── mdx.ts              # Утилиты для работы с MDX
│   └── i18n.ts             # Утилиты для локализации
├── public/                  # Статические файлы
├── docs/                    # Документация проекта
└── next.config.ts           # Конфигурация Next.js
```

## Ключевые архитектурные решения

### 1. Статическая генерация (SSG)

Проект использует `output: 'export'` в `next.config.ts` для генерации полностью статического сайта. Это позволяет деплоить на GitHub Pages без необходимости в Node.js сервере.

### 2. Локализация (i18n)

- Поддержка двух языков: `en` (английский) и `ru` (русский)
- Динамический сегмент `[locale]` в App Router
- Middleware для определения языка по умолчанию
- Файлы локализации в формате JSON: `lib/locales/en.json`, `lib/locales/ru.json`

### 3. Темы

- Интеграция с `next-themes` для управления темами
- Поддержка светлой и темной темы
- Интеграция с системой тем shadcn/ui через CSS-переменные
- Сохранение выбора темы в localStorage

### 4. MDX контент

- MDX файлы в папке `content/projects/[locale]/`
- Frontmatter для метаданных (title, description, date и т.д.)
- Утилиты для чтения и парсинга MDX файлов
- Генерация статических путей через `generateStaticParams`

### 5. UI компоненты

- Использование shadcn/ui для базовых компонентов
- Кастомизация через Tailwind CSS
- Темная/светлая тема через CSS-переменные

## Потоки данных

### Генерация статических страниц

1. Next.js собирает все MDX файлы из `content/projects/[locale]/`
2. `generateStaticParams` генерирует все возможные комбинации `[locale]` и `[slug]`
3. Для каждой комбинации генерируется статическая HTML страница
4. Результат сохраняется в `out/` (папка для экспорта)

### Работа с темами

1. Провайдер `ThemeProvider` из `next-themes` оборачивает приложение
2. Выбор темы сохраняется в localStorage
3. CSS-переменные обновляются динамически для поддержки темной/светлой темы

### Локализация

1. Middleware определяет предпочитаемый язык из заголовков браузера
2. Перенаправляет на соответствующий `[locale]` сегмент
3. Компоненты используют утилиты из `lib/i18n.ts` для получения переводов

## GitHub Pages конфигурация

- `basePath` в `next.config.ts` указывает на репозиторий GitHub Pages
- GitHub Actions workflow автоматически собирает и деплоит проект
- Статические файлы из `out/` загружаются в ветку `gh-pages`

